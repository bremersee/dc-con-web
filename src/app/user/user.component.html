<ng-container *ngIf="user | async as domainUser">

  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link" [ngClass]="view === 'profile' ? 'active' : ''"
         routerLink="/users/{{domainUser.userName}}">Profile</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" [ngClass]="view === 'groups' ? 'active' : ''"
         routerLink="/users/{{domainUser.userName}}" [queryParams]="{view: 'groups'}">Groups</a>
    </li>
  </ul>

  <div *ngIf="view === 'profile'" class="row">
    <div class="col-4">
      <img [attr.src]="avatarUrl(domainUser, 300) | tokenizer | async" class="card-img p-4" alt=" ">
    </div>
    <div class="col">
      <h2 *ngIf="domainUser.displayName" class="text-center">
        {{domainUser.displayName}}
      </h2>
      <h2 *ngIf="!domainUser.displayName" class="text-center">{{domainUser.userName}}</h2>
      <p *ngIf="domainUser.description" class="card-text">{{domainUser.description}}</p>
      <dl>
        <dt *ngIf="domainUser.displayName">User name</dt>
        <dd *ngIf="domainUser.displayName">{{domainUser.userName}}</dd>
        <dt *ngIf="domainUser.email">Email</dt>
        <dd *ngIf="domainUser.email">{{domainUser.email}}</dd>
        <dt *ngIf="domainUser.mobile">Mobile</dt>
        <dd *ngIf="domainUser.mobile">{{domainUser.mobile}}</dd>
        <dt *ngIf="domainUser.telephoneNumber">Telephone number</dt>
        <dd *ngIf="domainUser.telephoneNumber">{{domainUser.telephoneNumber}}</dd>
      </dl>
      <div class="font-weight-bold">Details</div>
      <div class="container p-0">
        <div *ngIf="domainUser.loginShell" class="row">
          <div class="col-md-4 col-sm-5">
            <small class="text-muted">Login shell</small>
          </div>
          <div class="col-md col-sm">
            <small class="text-muted">{{domainUser.loginShell}}</small>
          </div>
        </div>
        <div *ngIf="domainUser.unixHomeDirectory" class="row">
          <div class="col-md-4 col-sm-5">
            <small class="text-muted">Unix home directory</small>
          </div>
          <div class="col-md col-sm">
            <small class="text-muted">{{domainUser.unixHomeDirectory}}</small>
          </div>
        </div>
        <div *ngIf="domainUser.homeDirectory" class="row">
          <div class="col-md-4 col-sm-5">
            <small class="text-muted">Windows home directory</small>
          </div>
          <div class="col-md col-sm">
            <small class="text-muted">{{domainUser.homeDirectory}}</small>
          </div>
        </div>
        <div *ngIf="domainUser.created" class="row">
          <div class="col-md-4 col-sm-5">
            <small class="text-muted">Created at</small>
          </div>
          <div class="col-md col-sm">
            <small class="text-muted">{{domainUser.created}}</small>
          </div>
        </div>
        <div *ngIf="domainUser.modified" class="row">
          <div class="col-md-4 col-sm-5">
            <small class="text-muted">Last modification at</small>
          </div>
          <div class="col-md col-sm">
            <small class="text-muted">{{domainUser.modified}}</small>
          </div>
        </div>
        <div *ngIf="domainUser.lastLogon" class="row">
          <div class="col-md-4 col-sm-5">
            <small class="text-muted">Last logon at</small>
          </div>
          <div class="col-md col-sm">
            <small class="text-muted">{{domainUser.lastLogon}}</small>
          </div>
        </div>
        <div *ngIf="domainUser.logonCount" class="row">
          <div class="col-md-4 col-sm-5">
            <small class="text-muted">Logon times</small>
          </div>
          <div class="col-md col-sm">
            <small class="text-muted">{{domainUser.logonCount}}</small>
          </div>
        </div>
        <div *ngIf="domainUser.passwordLastSet" class="row">
          <div class="col-md-4 col-sm-5">
            <small class="text-muted">Last password change at</small>
          </div>
          <div class="col-md col-sm">
            <small class="text-muted">{{domainUser.passwordLastSet}}</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="view === 'groups'" class="row">
    <div class="col-2">
      <img [attr.src]="avatarUrl(domainUser, 300) | tokenizer | async" class="card-img p-4" alt=" ">
    </div>
    <div class="col">
      <h2 *ngIf="domainUser.displayName" class="text-center">
        {{domainUser.displayName}}
      </h2>
      <h2 *ngIf="!domainUser.displayName" class="text-center">{{domainUser.userName}}</h2>
    </div>
  </div>
</ng-container>

